import \'package:flutter/material.dart\';\nimport \'package:google_fonts/google_fonts.dart\';\nimport \'package:intl/intl.dart\';\n\nclass AddSubscriptionForm extends StatefulWidget {\n  final void Function(String, double, DateTime) onAdd;\n\n  const AddSubscriptionForm({required this.onAdd, super.key});\n\n  @override\n  _AddSubscriptionFormState createState() => _AddSubscriptionFormState();\n}\n\nclass _AddSubscriptionFormState extends State<AddSubscriptionForm> {\n  final _formKey = GlobalKey<FormState>();\n  final _nameController = TextEditingController();\n  final _amountController = TextEditingController();\n  DateTime? _selectedDate;\n\n  @override\n  Widget build(BuildContext context) {\n    return Padding(\n      padding: const EdgeInsets.all(20.0),\n      child: Form(\n        key: _formKey,\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\'Añadir Nueva Suscripción\', style: GoogleFonts.oswald(fontSize: 24, fontWeight: FontWeight.bold)),\n            const SizedBox(height: 20),\n            TextFormField(\n              controller: _nameController,\n              decoration: const InputDecoration(labelText: \'Nombre\'),\n              validator: (value) {\n                if (value == null || value.isEmpty) {\n                  return \'Por favor, introduce un nombre\';\n                }\n                return null;\n              },\n            ),\n            const SizedBox(height: 12),\n            TextFormField(\n              controller: _amountController,\n              decoration: const InputDecoration(labelText: \'Importe\'),\n              keyboardType: TextInputType.number,\n              validator: (value) {\n                if (value == null || double.tryParse(value) == null) {\n                  return \'Por favor, introduce un importe válido\';\n                }\n                return null;\n              },\n            ),\n            const SizedBox(height: 12),\n            Row(\n              children: [\n                Expanded(\n                  child: Text(\n                    _selectedDate == null\n                        ? \'Sin fecha de facturación\'\n                        : \'Próximo cobro: ${DateFormat.yMd().format(_selectedDate!)}\',\n                  ),\n                ),\n                TextButton(\n                  onPressed: _presentDatePicker,\n                  child: const Text(\'Elegir Fecha\'),\n                ),\n              ],\n            ),\n            const SizedBox(height: 20),\n            ElevatedButton(\n              onPressed: _submitForm,\n              child: const Text(\'Añadir Suscripción\'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n\n  void _presentDatePicker() {\n    showDatePicker(\n      context: context,\n      initialDate: DateTime.now(),\n      firstDate: DateTime.now(),\n      lastDate: DateTime.now().add(const Duration(days: 365 * 10)),\n    ).then((pickedDate) {\n      if (pickedDate == null) {\n        return;\n      }\n      setState(() {\n        _selectedDate = pickedDate;\n      });\n    });\n  }\n\n  void _submitForm() {\n    if (_formKey.currentState!.validate() && _selectedDate != null) {\n      widget.onAdd(\n        _nameController.text,\n        double.parse(_amountController.text),\n        _selectedDate!,\n      );\n      Navigator.of(context).pop();\n    }\n  }\n}\n